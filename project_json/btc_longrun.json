{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",


 "title": {
  "text": "Bitcoin: Price vs Volume",
  "subtitle":"Daily BTC price in USD and volume traded. Source: Investing.com and Bitfinex",
  "fontSize": 20,
  "subtitleFontStyle":"italic",
  "subtitleFontSize":12,
  "color": "#F7931A",
  "subtitleColor":"#000000",
  "anchor": "start"},

  "width":"container",
  "height":300,


  "data": {
    "name":"myData",
    "url": "https://raw.githubusercontent.com/jamiebbb/jamiebbb.github.io/main/project_data/btcdaily_24.11.21.csv"},



  "transform": [
      {"calculate":"replace(datum.Change,'%','')/100", "as": "change"},
      {"calculate":"replace(datum.Vol,'K','')*1000", "as": "Volume"},
      {"calculate": "year(datum.Date)", "as": "year"},  
      {"filter": "datum.year>=minYear"},
      {"filter": "datum.year<=maxYear"},
      {"calculate":"replace(datum.Change,'%','')/100", "as": "change"}
  ],
  
    "params": [    
      {"name":"minYear", "value":2012,
         "bind":{
           "input": "range",
           "min": 2012, 
           "max": 2021, 
           "step": 1,
           "name": "Start year:"}
      },
  
      {"name":"maxYear", "value":2021,
         "bind":{
           "input": "range",
           "min": 2012, 
           "max": 2021, 
           "step": 1,
           "name": "End year:"}
      }
    ],

  "encoding": {     
      "x": {
        "field": "Date",
        "title":null,
        "type": "temporal"}
        },
          
   "layer":[

      {"mark": {
          "type": "line",
          "point": false,
          "strokeWidth":1,
          "width":1
        },

      "encoding": {
          "y": {
          "field": "Price",
          "type": "quantitative",
          "title": "",
          "axis": {
            "grid": true,            
            "labelColor":"black",
            "format": "$,.5"}      
            },
            
          "color": {
            "datum": "Price",
            "scale": {"range": ["blue", "red"]},
            "legend":{
              "orient": "top-left"}}}
      },

     {"mark": {
          "type": "line",
          "point": false,
          "strokeWidth":1,
    "interpolate": "linear",
    "color":"#FFD700",
    "tooltip": true,
    "opacity": 0.9,
    "size": 1
  

        },



      "encoding": {
          "y": {
          "field": "Volume",
          "type": "quantitative",
          "title": "",
          "axis": {
            "grid": false,
            "labelColor":"black"}
          
            },
            
          "color": {
            "datum": "Volume",
            "scale": {"range": ["orange", "hotpink"]},
            "legend":{
              "orient": "top-left"}}
        
        } 
    }
],

    "resolve": {"scale": {"y": "independent"}} 
}
